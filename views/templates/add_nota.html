{% extends "skeleton.html" %}

{% block contents %}

{% if usr %}

<div id="dvAddNota" class="card" style="margin: 10px">
    <div class="card-header">Nueva Nota</div>
    <div class="card-body">
        <form id="frmAddNota" name="frmAddNota" action="/nota/add" method="POST">
            <label for="edTitle">Título</label>
            <input type="text" id="edTitle" name="edTitle" placeholder="Título..." required />
            <br/>

            <label for="edType">Tipo</label>
            <select id="edType" name="edType" required>
                <option value="normal">Normal</option>
                <option value="lista">Lista</option>
                <option value="imagen">Imagen</option>
            </select>
            <br/>

            <div id="normalContent" class="noteContent">
                <label for="edContent">Contenido</label>
                <textarea id="edContent" name="edContent" placeholder="Contenido..."></textarea>
            </div>

            <div id="listaContent" class="noteContent" style="display:none;">
                <label for="edLista">Elementos (separados por comas)</label>
                <textarea id="edLista" name="edLista" placeholder="Elemento1, Elemento2, Elemento3..."></textarea>
            </div>

            <div id="imagenContent" class="noteContent" style="display:none;">
                <label for="edImagen">URL de la Imagen</label>
                <input type="text" id="edImagen" name="edImagen" placeholder="http://..." />
                <br/>
                <label for="edTexto">Texto</label>
                <textarea id="edTexto" name="edTexto" placeholder="Texto..."></textarea>
            </div>

            <label for="edSection">Sección (opcional)</label>
            <input type="text" id="edSection" name="edSection" placeholder="Sección..." />
            <br/>

            <div style="margin: 5px">
                <a href="#" onclick="document.frmAddNota.submit()" class="btn btn-primary">
                    <img width="24px" src="/static/add.svg" title="Añadir" />
                    &nbsp;
                    Añadir
                </a>
                <a href="#" onclick="window.location='/'" class="btn btn-primary">
                    <img width="24px" src="/static/back.svg" title="Volver" />
                    &nbsp;
                    Volver
                </a>
            </div>
        </form>
    </div>
</div>

<script>
    document.getElementById('edType').addEventListener('change', function() {
        var noteType = this.value;
        var contents = document.querySelectorAll('.noteContent');
        contents.forEach(function(content) {
            content.style.display = 'none';
        });

        if (noteType === 'normal') {
            document.getElementById('normalContent').style.display = 'block';
        } else if (noteType === 'lista') {
            document.getElementById('listaContent').style.display = 'block';
        } else if (noteType === 'imagen') {
            document.getElementById('imagenContent').style.display = 'block';
        }
    });

    document.getElementById('edType').dispatchEvent(new Event('change'));
</script>

{% endif %}
{% endblock %}
